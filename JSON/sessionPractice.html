<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>JSON</title>
</head>

<body>
    <h1>Learn JSON </h1>
    <div id="output"></div>
    <form id="myForm">
        <input type="text", name="first", value="Niketa"/><br>
        <input type="text", name="last", value="Jenerettte"/><br>
        <input type="text", name="email", value="test@test.com"/><br>
        <input type="text", name="company", value="Dream Company"/><br>
        <input type="submit", value="submit"/><br>
    </form>
 
    <script type="text/javascript">
    let myForm = document.getElementById("myForm")

    window.onload = function(){
            if (sessionStorage['person'] != null){
                let data = JSON.parse(sessionStorage['person'])
                let message = "Welcome  " + data.first+ ' ' +data.last+ '  to the site!!!'
                document.getElementById('output').innerHTML = message;
                console.log(data)
            }
        }

    myForm.addEventListener('submit', function(e){
        e.preventDefault();
        
        let data = JSON.stringify(formData(myForm));
            if(data){
                sessionStorage['person'] = data
            }
        console.log(data)
    })

    function formData(form) {
        let elements= form.querySelectorAll('input[type="text"]')
        let myData={};
        for(let x=0; x<elements.length; x++){
            let name = elements[x].name
            let value = elements[x].value

            //console.log(name,value)
            myData[name] = value
        }
        return myData
    }
   
        
    </script>
</body>

</html>